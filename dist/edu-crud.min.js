var eduCrudServices=angular.module("edu-crud.services",[]),eduCrudDirectives=angular.module("edu-crud.directives",[]),eduCrudFilters=angular.module("edu-crud.filters",[]),eduCrudTpl=angular.module("edu-crud.tpl",[]);angular.module("eduCrud",["edu-crud.services","edu-crud.directives","edu-crud.filters","edu-crud.tpl","ngResource","ui.bootstrap","eduField","eduForm","eduGrid"]),eduCrudServices.factory("dataFactory",["$resource",function(a){return function(b){return console.log("dataFactory:"+b),a(b,{},{getAll:{method:"GET",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!0},getCount:{method:"GET",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!1},get:{method:"GET",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!1},insert:{method:"POST",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!1},update:{method:"PUT",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!1},remove:{method:"DELETE",params:{},headers:{"Access-Control-Allow-Credentials":!0},isArray:!1}})}}]),eduCrudDirectives.directive("eduCrud",function(){return{restrict:"A",replace:!0,transclude:!1,scope:{ngModel:"=",options:"="},templateUrl:"directives/edu-crud.tpl.html",link:function(a){if(!a.hasOwnProperty("options"))throw new Error("options are required!");a.internalControl=a.options.crudControl||{},a.internalControl.refresh=function(){a.options.gridControl.refresh()},a.internalControl.showOverlayLoading=function(b){a.options.gridControl.showOverlayLoading(b)},a.internalControl.showOverlayFormDelete=function(b){a.options.showOverlayCrudFormDelete=b},a.internalControl.showOverlayFormUser=function(b){a.options.showOverlayFormUser=b},a.internalControl.showButtonsGridUserPre=function(b){a.options.gridControl.showButtonsUserPre(b)},a.internalControl.showButtonsGridUserPost=function(b){a.options.gridControl.showButtonsUserPost(b)},a.internalControl.showButtonsCrudPre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudEditPre=b,a.options.showButtonsCrudDeletePre=b},a.internalControl.showButtonsCrudPost=function(b){a.options.showButtonsCrudEditPost=b,a.options.showButtonsCrudDeletePost=b},a.internalControl.showButtonsCrudEditPre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudEditPre=b},a.internalControl.showButtonsCrudEditPost=function(b){a.options.showButtonsCrudEditPost=b},a.internalControl.showButtonsCrudDeletePre=function(b){console.log("showButtonsCrudPre"+b),a.options.showButtonsCrudDeletePre=b},a.internalControl.showButtonsCrudDeletePost=function(b){a.options.showButtonsCrudDeletePost=b}},controller:["$scope","$log","dataFactory",function(a,b,c){if(a.options.hasOwnProperty("showButtonsCrudPre")&&(a.options.showButtonsCrudEditPre=a.options.showButtonsCrudPre,a.options.showButtonsCrudDeletePre=a.options.showButtonsCrudPre),a.options.hasOwnProperty("showButtonsCrudPost")&&(a.options.showButtonsCrudEditPost=a.options.showButtonsCrudPost,a.options.showButtonsCrudDeletePost=a.options.showButtonsCrudPost),a.options.hasOwnProperty("showAddButtonTopLeft")&&(a.options.showExtraButtonTopLeft=a.options.showAddButtonTopLeft),a.options.hasOwnProperty("showAddButtonTopRight")&&(a.options.showExtraButtonTopRight=a.options.showAddButtonTopRight),a.options.hasOwnProperty("snippets")&&a.options.snippets.hasOwnProperty("buttonAdd")&&(a.options.snippets.extraButtonTop=a.options.snippets.buttonAdd),a.options.listListeners.onExtraButtonClick=function(){console.log("click extra button:"),a.add()},a.options.crudControl={},a.showForm=!1,a.options.buttonsGridUserPre=[],a.options.buttonsGridUserPost=[],a.options.showButtonsGridUserPre=!0,a.options.showButtonsGridUserPost=!0,a.options.showButtonsUserPre&&a.options.hasOwnProperty("buttonsUserPre"))for(var d=0;d<a.options.buttonsUserPre.length;d++)a.options.buttonsGridUserPre.push(a.options.buttonsUserPre[d]);if(a.options.showButtonsUserPost&&a.options.hasOwnProperty("buttonsUserPost"))for(var d=0;d<a.options.buttonsUserPost.length;d++)a.options.buttonsGridUserPost.push(a.options.buttonsUserPost[d]);a.options.showButtonsCrudEditPre&&a.options.buttonsGridUserPre.push({label:"Editar","class":"",glyphicon:"edit",button:!1,onclick:function(b){a.edit(b)}}),a.options.showButtonsCrudDeletePre&&a.options.buttonsGridUserPre.push({label:"Eliminar","class":"",glyphicon:"trash",button:!1,onclick:function(b){a.selectedRowForDelete=b,a.keyRowForDelete=a.options.fieldKeyLabel+": "+b[a.options.fieldKey]+"?",a.options.showOverlayCrudFormDelete=!0}}),a.options.showButtonsCrudEditPost&&a.options.buttonsGridUserPost.push({label:"Editar","class":"",glyphicon:"edit",button:!1,onclick:function(b){a.edit(b)}}),a.options.showButtonsCrudDeletePost&&a.options.buttonsGridUserPost.push({label:"Eliminar","class":"",glyphicon:"trash",button:!1,onclick:function(b){a.selectedRowForDelete=b,a.keyRowForDelete=a.options.fieldKeyLabel+": "+b[a.options.fieldKey]+"?",a.options.showOverlayCrudFormDelete=!0}}),a.options.showOverlayLoading=!1,a.startLoading=function(){console.log("ovelay on:"+jQuery("#overlayxx").html()),a.options.showOverlayLoading=!0},a.finishLoading=function(){console.log("overlay off"),a.options.showOverlayLoading=!1},a.api=null,a.apiCount=null,"undefined"==typeof a.ngModel&&""!==a.options.crudUri&&(a.api=c(a.options.crudUri),a.apiCount=c(a.options.crudUriCount)),a.options.formListeners={onsave:function(b){console.log("grid form onsave()"+angular.toJson(b)),a.save(b)},oncancel:function(){console.log("grid form oncancel()"),a.cancel()}},a.cancel=function(){b.log("click cancel"),a.mode="list",a.showForm=!1},a.edit=function(c){console.log("Edit row:",c);var d=c[a.options.fieldKey],e={};e[a.options.fieldKey]=d,a.api.get({id:d},function(c){b.log("homeDataFactory: "+angular.toJson(c)),a.options.formData=c,a.options.formFields.tabs[0].active=!0}),a.mode="edit",a.showForm=!0},a.save=function(c){if("edit"==a.mode){var d=c[a.options.fieldKey],e={};e[a.options.fieldKey]=d,a.api.update({id:d},c,function(a){b.log("edit dataFactory:"+a.length+" "+angular.toJson(a))})}else"new"==a.mode&&(b.log("click save row:"+angular.toJson(c)),a.api.insert(c,function(a){b.log("insert dataFactory:"+a.length+" "+angular.toJson(a))}));a.mode="list",a.options.gridControl.refresh(),a.showForm=!1},a.remove=function(c){var d=c[a.options.fieldKey];b.log("click delete:"+d);var e={};e[a.options.fieldKey]=d,a.api.remove({id:d},function(){a.options.gridControl.refresh()})},a.add=function(){b.log("click new"),a.mode="new",a.showForm=!0;for(key in a.options.formData)a.options.formData[key]=""},a.options.formData={},a.formFieldsError=!1,a.formOptionsError=!1,a.formDeleteContinue=function(){a.remove(a.selectedRowForDelete),a.options.showOverlayCrudFormDelete=!1},a.formDeleteCancel=function(){a.options.showOverlayCrudFormDelete=!1}}]}}),angular.module("edu-crud.tpl").run(["$templateCache",function(a){"use strict";a.put("directives/edu-crud.tpl.html",'<div><div class=box><div ng-hide=showForm><div class=panel-body><div edu-grid options=options></div></div></div><div ng-show=showForm><div class=panel-heading><div class=row><div class="col-md-11 col-md-offset-1"><h4 class=panel-heading>{{options.heading}}</h4></div></div></div><div class=panel-body><div><div edu-form result=options.formData options=options></div></div></div></div><div name=overlay class="dw-loading dw-loading-overlay dw-loading-active" ng-show=options.showOverlayCrudFormDelete><div class=dw-loading-body><div class=dw-loading-spinner><div class="panel panel-default"><div class=panel-heading><div class=row><div class=col-md-12><h4>{{options.snippets.formDeleteTitle}}</h4></div></div></div><div class=panel-body><h4>{{options.snippets.formDeleteMessage}} {{keyRowForDelete}}</h4></div><div class=panel-footer><div class=row><div class="col-md-offset-6 col-md-6"><button ng-click=formDeleteContinue() class="btn btn-sm btn-primary">{{options.snippets.formDeleteButtonContinue}}</button> <button ng-click=formDeleteCancel() class="btn btn-sm">{{options.snippets.formDeleteButtonCancel}}</button></div></div></div></div></div><div class=dw-loading-text></div></div></div><div name=overlay class="dw-loading dw-loading-overlay dw-loading-active" ng-show=options.showOverlayFormUser><div class=dw-loading-body><div class=dw-loading-spinner><div class="panel panel-default"><form name=formUser novalidate style=width:400px><div class=panel-heading><h4>{{options.snippets.formUserTitle}}</h4></div><div class=panel-body><h4>{{options.snippets.formUserMessage}}</h4><ng-form name=formUser><div ng-repeat="field in options.formUser.fields"><div class="form-group {{field.col}}"><label for={{field.key}} class=ng-binding style=align:left>{{field.label}} {{field.required ? \'*\' : \'\'}}</label><input class=form-control id={{field.key}} name={{field.key}} ng-model=options.formUser.result[field.key] placeholder={{field.placeholder}} ng-required=field.required ng-disabled=field.disabled></div></div></ng-form><div><h5>Nota:</h5><span>{{options.snippets.formUserNota}}</span></div></div><div class=panel-footer><div class=row><div class="col-md-offset-3 col-md-9"><button ng-click=options.formUser.events.continue(selectedRow) ng-disabled=formUser.$invalid class="btn btn-sm btn-primary">{{options.snippets.formUserButtonContinue}}</button> <button ng-click=options.formUser.events.cancel() class="btn btn-sm">{{options.snippets.formUserButtonCancel}}</button></div></div></div></form></div></div><div class=dw-loading-text></div></div></div></div></div>')}]);
//# sourceMappingURL=edu-crud.min.map